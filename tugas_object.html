<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>
	<div>Geser Mouse untuk menggerakkan atau tekan dan tahan tombol up, left, right, down pada keyboard. Tekan tombol "Enter" untuk menyalakan atau mematikan lampu. BUKA MENGGUNAKAN MICROSOFT EDGE!</div>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
	<script src="js/three.js"></script>

	<!-- <script src="https://threejsfundamentals.org/threejs/resources/threejs/r108/three.min.js"></script> -->
	<script src="https://threejs.org/examples/js/controls/OrbitControls.js "></script>
	<script src="js/font2.js"></script>
	
	<script>
		var scene = new THREE.Scene();
		var camera = new THREE.PerspectiveCamera(
		    60,                                   // Field of view
		    window.innerWidth/window.innerHeight, // Aspect ratio
		    0.1,                                  // Near clipping pane
		    1000                                  // Far clipping pane
		);

		// camera.position.set(5,5,0);
		camera.position.set(0,0,50);
		camera.lookAt(new THREE.Vector3(0,0,0));

		var renderer = new THREE.WebGLRenderer({ antialias: true});
		renderer.setSize( window.innerWidth, window.innerHeight );
		renderer.setClearColor( 0xfff6e6 );
		// Enable shadow mapping
		renderer.shadowMap.enabled = true;
		renderer.shadowMap.type = THREE.PCFSoftShadowMap;
		document.body.appendChild( renderer.domElement );

		// Plane
		var texture = new THREE.TextureLoader().load('floor.png');
		var plane = new THREE.Mesh(
		    new THREE.PlaneGeometry( 100, 100, 100, 100 ),
		    // new THREE.MeshBasicMaterial( { color: 0x393839, wireframe: true } )
		    new THREE.MeshLambertMaterial( { 
		    	map: texture, 
		    	side: THREE.DoubleSide, 
			})
		);
		plane.position.set(0,-10,0);
		plane.rotateX(Math.PI/2);
		scene.add( plane );

		//Vertical
		var geometry = new THREE.BoxGeometry( 1, 35, 15 );
		var material = new THREE.MeshLambertMaterial( {color: "#fc2803", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(-10,7.5,-20)
		scene.add( cube );

		var geometry = new THREE.BoxGeometry( 1, 35, 15 );
		var material = new THREE.MeshLambertMaterial( {color: "#fc2803", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(-25,7.5,-20)
		scene.add( cube );
		
		//Horizontal
		var geometry = new THREE.BoxGeometry( 16, 1, 15 );
		var material = new THREE.MeshLambertMaterial( {color: "#fc2803", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(-17.5,25,-20)
		scene.add( cube );

		var geometry = new THREE.BoxGeometry( 16, 1, 15 );
		var material = new THREE.MeshLambertMaterial( {color: "#fc2803", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(-17.5,15,-20)
		scene.add( cube );

		var geometry = new THREE.BoxGeometry( 15, 1, 15 );
		var material = new THREE.MeshLambertMaterial( {color: "#fc2803", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(-17,5,-20)
		scene.add( cube );

		var geometry = new THREE.BoxGeometry( 16, 1, 15 );
		var material = new THREE.MeshLambertMaterial( {color: "#fc2803", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(-17.5,-5,-20)
		scene.add( cube );

		//Kanan
		var geometry = new THREE.BoxGeometry( 1, 14, 15 );
		var material = new THREE.MeshLambertMaterial( {color: "#fc2803", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(25,-3,-20)
		scene.add( cube );

		var geometry = new THREE.BoxGeometry( 1, 20, 8 );
		var material = new THREE.MeshLambertMaterial( {color: "#fc2803", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(25,14,-23.5)
		scene.add( cube );

		//Horizontal Tengah
		var geometry = new THREE.BoxGeometry( 0.5, 10, 5 );
		var material = new THREE.MeshLambertMaterial( {color: "#ffcc00", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(10,10,-25)
		scene.add( cube );

		//Tengah
		var geometry = new THREE.BoxGeometry( 35, 2, 15 );
		var material = new THREE.MeshLambertMaterial( {color: "#fc2803", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(7.5,4.5,-20)
		scene.add( cube );

		var geometry = new THREE.BoxGeometry( 35, 0.5, 5 );
		var material = new THREE.MeshLambertMaterial( {color: "#ffcc00", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(7.5,8,-25)
		scene.add( cube );

		var geometry = new THREE.BoxGeometry( 35, 1, 7 );
		var material = new THREE.MeshLambertMaterial( {color: "#ffcc00", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(7.5,-3,-24)
		scene.add( cube );

		var geometry = new THREE.BoxGeometry( 35, 1, 7 );
		var material = new THREE.MeshLambertMaterial( {color: "#ffcc00", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(7.5,15,-24)
		scene.add( cube );

		var geometry = new THREE.BoxGeometry( 15, 0.5, 5 );
		var material = new THREE.MeshLambertMaterial( {color: "#ffcc00", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(17.5,11,-25)
		scene.add( cube );

		var geometry = new THREE.BoxGeometry( 35, 1, 7 );
		var material = new THREE.MeshLambertMaterial( {color: "#ffcc00", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(7.5,22,-24)
		scene.add( cube );

		//Belakang
		var geometry = new THREE.BoxGeometry( 16, 30, 1 );
		var material = new THREE.MeshLambertMaterial( {color: "#fc2803", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(-17.5,10,-28)
		scene.add( cube );

		var geometry = new THREE.BoxGeometry( 35, 20, 1 );
		var material = new THREE.MeshLambertMaterial( {color: "#fc2803", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(8,6,-28)
		scene.add( cube );

		var geometry = new THREE.BoxGeometry( 35, 8, 1 );
		var material = new THREE.MeshLambertMaterial( {color: "#fc2803", map: texture} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(8,20,-28)
		scene.add( cube );

		//Hiasan
		var geometry = new THREE.BoxGeometry( 35, 2, 1 );
		var material = new THREE.MeshLambertMaterial( {color: "#80a629"} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(7.5,14,-21.5)
		scene.add( cube );

		var geometry = new THREE.OctahedronGeometry(0.8, 0);  //OctahedronGeometry(radius, detail)
	    var material = new THREE.MeshLambertMaterial({color: 0xF3FFE2});
	    var mesh8 = new THREE.Mesh(geometry, material);
	    mesh8.position.set(7.5,13.8,-21.1);
	    scene.add(mesh8);

		//Nama
		var loader = new THREE.FontLoader();
	    var font = loader.parse(fontJSON);
	    var geometry = new THREE.TextGeometry("Andhika Yoga P.", {
	      font: font, 
	      size: 3, 
	      height: 0.5, 
	      material: 0, 
	      bevelThickness: 1, 
	      extrudeMaterial: 1,
	      curveSegments: 0,
	      bevelEnabled: false,
	      bevelThickness: 5,
	      bevelSize: 5,
	      bevelOffset: 0,
	      bevelSegments: 5
	    });  
	    var material = new THREE.MeshLambertMaterial();
	    var mesh = new THREE.Mesh(geometry, material);
	    mesh.position.set(-6,17.5,-27.5)
	    scene.add(mesh);

		//Ruang
		var texture1 = new THREE.TextureLoader().load('wallpaper_dinding.png');
		var geometry = new THREE.BoxGeometry( 1, 60, 100 );
		// var material = new THREE.MeshLambertMaterial( {depthWrite:false, transparent:true} );
		var material = new THREE.MeshLambertMaterial( {color: "#00f2ff", map: texture1} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(-50,20,0)
		scene.add( cube );

		var geometry = new THREE.BoxGeometry( 1, 60, 100 );
		// var material = new THREE.MeshLambertMaterial( {depthWrite:false, transparent:true} );
		var material = new THREE.MeshLambertMaterial( {color: "#00f2ff", map: texture1} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(50,20,0)
		scene.add( cube );

		var geometry = new THREE.BoxGeometry( 100, 60, 1 );
		// var material = new THREE.MeshLambertMaterial( {depthWrite:false, transparent:true} );
		var material = new THREE.MeshLambertMaterial( {color: "#00f2ff", map: texture1} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(0,20,-50)
		scene.add( cube );

		var geometry = new THREE.BoxGeometry( 100, 1, 100 );
		// var material = new THREE.MeshLambertMaterial( {depthWrite:false, transparent:true} );
		var material = new THREE.MeshLambertMaterial( {color: "#00fbff"} );
		var cube = new THREE.Mesh( geometry, material );
		cube.position.set(0,50,0)
		scene.add( cube );

		// Lampu
		var lampu1 = new THREE.Mesh(
            new THREE.OctahedronGeometry(2, 4),
            new THREE.MeshStandardMaterial({
                emissive: 0xFBA40D,
                emissiveIntensity: 1,
                color: 0xFBA40D,
                roughness: 1
            })
        );

		// Cahaya
		var pointLight = new THREE.PointLight( 0xffffff, 1 );
		pointLight.position.set( 0, 20, 25 );
		pointLight.castShadow = true;
		pointLight.shadow.mapSize.width = 1024;
		pointLight.shadow.mapSize.height = 1024;
		pointLight.intensity = 1;
		scene.add( pointLight );

		// A basic material that shows the geometry wireframe.
		var shadowMaterial = new THREE.ShadowMaterial( { color: 0x000000 } );
		shadowMaterial.opacity = 0.5;
		var groundMesh = new THREE.Mesh(
		    new THREE.BoxGeometry( 500, 0, 100 ),
		   	shadowMaterial
		);
		groundMesh.receiveShadow = true;
		scene.add( groundMesh );

		// renderer.render(scene, camera);
		var controls = new THREE.OrbitControls( camera, renderer.domElement );
        controls.addEventListener( 'change', function() { renderer.render(scene, camera); } );	
		// controls.update();

		var nyala = true;
		document.addEventListener("keypress", function (event) {
            console.log(event);
            // if (event.key === "m"){
            //     nyala = !nyala;
            // }
            if (event.keyCode === 13){
                nyala = !nyala;
            }
        });

		function animate(time){
			var timeInSecs = time/1000;
            if (nyala) {
                if (parseInt(timeInSecs) % 2 == 0) {
					pointLight.intensity = 1;
                } else {
					pointLight.intensity = 1;
                }
            } else {
				pointLight.intensity = 0.5;
            }

			requestAnimationFrame( animate );
			// controls.autoRotate = true
			controls.autoRotateSpeed = 1.5
			controls.enableKeys = true
			controls.keyPanSpeed = 30
			controls.enableDamping = true
			controls.enablePan = true
			controls.enableZoom = true
			controls.maxDistance = 100
			controls.maxPolarAngle = Math.PI /2

			controls.update();
			renderer.render( scene, camera );
		}
		animate()
	</script>
</body>
</html>